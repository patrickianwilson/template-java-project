buildscript {
    repositories {
        maven {
            url "http://repo.wilsonsinquest.com/nexus/content/repositories/releases/"
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
        mavenCentral()
    }
    dependencies {
        classpath "com.github.patrickianwilson:ProjectConventionsGradlePlugin:1.0.+"
        classpath "net.ltgt.gradle:gradle-apt-plugin:0.15"
    }
}

project.version = 'dev.1'

project.group = "com.github.patrickianwilson"

apply plugin: "project.cardinal-service"

project.ext {
    dockerTag = "template-cardinal-service:latest"
    dockerFile = "$projectDir/src/main/deploy/Dockerfile"
    dockerImagePath="us.gcr.io/inlaid-citron-94802/services/template-cardinal-service:${version}"
    serviceYamlFileTemplate="${projectDir}/src/main/deploy/Service.yaml"
}
apply plugin: "facet.docker"
apply plugin: "project.java-standalone"
apply plugin: "project.java-standalone"
apply plugin: "project.java-standalone"
if (System.getenv("BUILD_NUMBER") != null) {
    def majorVersion = "1.0" //eventually override with a lookup
    def buildSetVersion = "0" //eventually look this up too.
    project.version = "${majorVersion}.${buildSetVersion}.${System.getenv("BUILD_NUMBER")}"
}

apply plugin: "project.java"
apply plugin: "project.cardinal-service"

project.ext {
    dockerTag = "template-cardinal-service:latest"
    dockerFile = "$projectDir/src/main/deploy/Dockerfile"
    dockerImagePath="us.gcr.io/inlaid-citron-94802/services/template-cardinal-service:${version}"
    serviceYamlFileTemplate="${projectDir}/src/main/deploy/Service.yaml"
}
apply plugin: "facet.docker"

mainClassName="com.patrickwilsonconsulting.Runner"

repositories {
    maven{
        url("http://repo.wilsonsinquest.com/nexus/content/repositories/ardm-dev-track")
    }
    maven {
        url "http://repo.wilsonsinquest.com/nexus/content/repositories/releases/"
    }
    mavenCentral()
}
dependencies {
    compile "com.wilsonsinquest.data:Datasource-GCP-Datastore:0.+"
    compile "com.github.patrickianwilson:ServicePatterns:1.0.+"
}
